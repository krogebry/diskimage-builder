{"AWSTemplateFormatVersion":"2010-09-09","Description":"Base bits","Parameters":{"BuildId":{"Type":"String","Description":"Build identifier."},"KeyName":{"Type":"String","Default":"key-4fc4ce20-39f8-0130-9bab-3cd92b5434b6","Description":"Key name."},"client-instance_type":{"Type":"String","Default":"m1.small","Description":"log_stash client instance type."},"broker-instance_type":{"Type":"String","Default":"m1.small","Description":"log_stash broker instance type."},"broker-redis_port":{"Type":"String","Default":"6379","Description":"log_stash broker redis port."}},"Resources":{"CfnUser":{"Type":"AWS::IAM::User"},"BuildKeys":{"Type":"AWS::IAM::AccessKey","Properties":{"UserName":{"Ref":"CfnUser"}}},"WaitHandle":{"Type":"AWS::CloudFormation::WaitConditionHandle"},"log_stash-client":{"Type":"AWS::EC2::Instance","Properties":{"ImageId":{"Fn::Join":["-",["client",{"Ref":"BuildId"}]]},"KeyName":{"Ref":"KeyName"},"InstanceType":{"Ref":"client-instance_type"}}},"log_stash-broker":{"Type":"AWS::EC2::Instance","Metadata":{"AWS::CloudFormation::Init":{"config":{"packages":{"apt":{}}}}},"Properties":{"ImageId":{"Fn::Join":["-",["broker",{"Ref":"BuildId"}]]},"KeyName":{"Fn::Join":["-",["key",{"Ref":"BuildId"}]]},"InstanceType":{"Ref":"broker-instance_type"}}}},"Outputs":{}}
